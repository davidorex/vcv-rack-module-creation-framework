# Creative Brief: [ModuleName]

**CRITICAL CONTRACT:** This specification is immutable during Stages 2-5 implementation. All implementation stages reference this exact vision and requirements.

**Generated by:** Stage 0 Ideation
**Referenced by:** Stage 1 (Planning), Stage 3 (Panel Design), Stage 4 (DSP Implementation)
**Purpose:** Vision document defining module concept, sonic goals, I/O requirements, and use cases

---

## Module Concept

**Type:** [Oscillator | Filter | VCA | Envelope | LFO | Sequencer | Effect | Mixer | Utility | Logic | Clock | Random | Quantizer | Sampler | Waveshaper | Other]

**Created:** [YYYY-MM-DD]

**Category:** [Primary Eurorack category for Library browser]

**Description:**
[2-3 sentence overview of what this module does and why it exists]

**Example:**
```markdown
A vintage-inspired tape delay with voltage-controlled feedback and wow/flutter modulation. Combines classic analog delay characteristics with modern CV control for dynamic soundscaping and rhythmic effects.
```

---

## Physical Specifications

### HP Width

**Size:** [X] HP ([X * 5.08] mm width)

**Rationale:** [Why this width is appropriate for the feature set]

**Guidelines:**
- 4-6 HP: Minimal modules (single function, few controls)
- 8-10 HP: Standard modules (moderate complexity)
- 12-16 HP: Complex modules (many parameters and I/O)
- 18-20 HP: Very complex modules (multiple subsystems)
- 22+ HP: Mega modules (complete voice/system)

**Example:**
```markdown
**Size:** 10 HP (50.80 mm width)

**Rationale:** Accommodates 6 knobs, 4 inputs, 2 outputs, and 2 lights with comfortable spacing. Standard width for a feature-complete delay effect without overwhelming rack space.
```

---

## Eurorack Category

**Primary:** [Select ONE from list below]
**Secondary:** [Optional - if module fits multiple categories]

**Categories:**
- Oscillator - Voltage-controlled tone generators
- Filter - Frequency-selective processors
- VCA - Voltage-controlled amplifiers
- Envelope - Envelope generators (ADSR, AD, etc.)
- LFO - Low-frequency oscillators
- Sequencer - Step sequencers, pattern generators
- Effect - Reverb, delay, chorus, phaser, etc.
- Mixer - Signal combiners, crossfaders
- Utility - Multiples, attenuators, offsets, switches
- Logic - Boolean operations, comparators
- Clock - Clock generators, dividers, multipliers
- Random - Noise sources, sample & hold
- Quantizer - Pitch quantization
- Sampler - Sample playback
- Waveshaper - Distortion, wavefolder

**Example:**
```markdown
**Primary:** Effect
**Secondary:** Utility (can be used as pure delay line for patching)
```

---

## Sonic Goals

**Primary:**
[Main sonic characteristic or creative goal - what defines this module's sound/function]

**Secondary:**
[Supporting sonic characteristics or functional features that enhance the primary goal]

**Tertiary:**
[Additional sonic characteristics, features, or sweet spots that emerge from the design]

**Example:**
```markdown
**Primary:**
Warm, vintage tape delay with natural high-frequency rolloff and subtle saturation. Evokes classic analog delays (Echoplex, RE-201) with controllable degradation and wow/flutter.

**Secondary:**
Voltage-controlled feedback for self-oscillation effects and infinite holds. CV-controllable delay time with anti-aliased interpolation for smooth pitch-shifting when modulated.

**Tertiary:**
Ping-pong stereo mode for spatial effects. External feedback patching enables creative routing (filters in feedback path, cross-feedback between modules).
```

---

## Use Cases

[List 3-6 specific patching scenarios where this module excels]

1. [Primary use case - most common application]
2. [Secondary use case - alternative application]
3. [Creative use case - unexpected or experimental application]
4. [Performance use case - live patching scenario]
5. [Compositional use case - studio/production application]

**Example:**
```markdown
1. **Classic Delay Effect**: Rhythmic echoes on drums, vocals, or synth lines. Set delay time to musical divisions (quarter notes, eighth notes) and adjust feedback for repeats.

2. **Self-Oscillation Resonance**: Max feedback creates pitched resonance that tracks 1V/oct CV input. Use as additional VCO with unique timbral characteristics.

3. **Pitch-Shifting Glitches**: Modulate delay time with LFO or envelope for tape-speed effects, pitch-shifting, and glitchy textures. CV control enables rhythmic pitch modulation.

4. **Ping-Pong Spatial Processing**: Stereo output creates wide, bouncing delays. Patch to mixer for spatial effects on mono sources.

5. **Feedback Patching Network**: Use external feedback input to insert filters, VCAs, or other modules in feedback path. Creates complex evolving textures.

6. **Clock Delay/Rhythm Generator**: Delay gate/trigger signals for polyrhythms and timing offsets. CV control enables dynamic rhythmic variations.
```

---

## Inputs and Outputs

### Audio/CV Inputs

[Table of all input ports with voltage ranges and purposes]

| Input Label | Type | Voltage Range | Purpose | Notes |
|------------|------|--------------|---------|-------|
| [Label] | [Audio/CV/Gate/Trigger] | [Range] | [What it controls] | [Special behavior] |

**Example:**
```markdown
| Input Label | Type | Voltage Range | Purpose | Notes |
|------------|------|--------------|---------|-------|
| IN | Audio | ±5V (±10V OK) | Audio input to delay | Mono input, feeds both channels in stereo mode |
| TIME CV | CV | ±5V | Delay time modulation | Added to TIME knob, 1V = ~100ms shift |
| FEEDBACK CV | CV | ±5V | Feedback amount modulation | Bipolar control (±5V = full range) |
| EXT FB | Audio | ±5V | External feedback input | Replaces internal feedback path when patched |
```

### Audio/CV Outputs

[Table of all output ports with voltage ranges and purposes]

| Output Label | Type | Voltage Range | Purpose | Notes |
|-------------|------|--------------|---------|-------|
| [Label] | [Audio/CV/Gate/Trigger] | [Range] | [What it provides] | [Special behavior] |

**Example:**
```markdown
| Output Label | Type | Voltage Range | Purpose | Notes |
|-------------|------|--------------|---------|-------|
| OUT L | Audio | ±5V | Left/mono delay output | Mono signal when ping-pong disabled |
| OUT R | Audio | ±5V | Right delay output | Copy of L when ping-pong disabled, alternating delays when enabled |
| DRY | Audio | ±5V | Dry signal output | Buffered input for parallel processing |
```

### Gates and Triggers

[If module has gate/trigger I/O, specify behavior]

**Example:**
```markdown
| Input Label | Type | Threshold | Purpose | Notes |
|------------|------|-----------|---------|-------|
| FREEZE | Gate | >1V = high | Freeze delay buffer | Hold = infinite sustain, low = normal |

- **Gate behavior**: High (>1V) = active, Low (<1V) = inactive
- **Trigger behavior**: Rising edge (0V → >1V) = trigger event, 10V recommended
```

### Polyphony Support

**Mode:** [Monophonic | Fully Polyphonic | Polyphonic Passthrough | Sum to Mono]

**Description:** [How module handles polyphonic cables]

**Example:**
```markdown
**Mode:** Fully Polyphonic

**Description:**
- IN port accepts up to 16 channels
- Each channel processes independently through delay line
- TIME CV affects all channels equally (global control)
- FEEDBACK CV can be polyphonic (per-channel feedback control)
- OUT L/R output same channel count as IN
- CPU usage scales with active channels
```

---

## Parameters

### Knobs/Controls

[Table of all user-facing controls]

| Param Label | Type | Range | Default | Unit | Purpose |
|------------|------|-------|---------|------|---------|
| [Label] | [Knob/Switch/Button] | [Min-Max] | [Default] | [Unit] | [What it controls] |

**Example:**
```markdown
| Param Label | Type | Range | Default | Unit | Purpose |
|------------|------|-------|---------|------|---------|
| TIME | Knob | 10ms - 1s | 250ms | ms | Base delay time |
| FEEDBACK | Knob | 0 - 120% | 50% | % | Feedback amount (>100% = runaway) |
| MIX | Knob | 0 - 100% | 50% | % | Dry/wet balance |
| TONE | Knob | -100 to +100 | -30 | - | Filter in feedback (- = dark, + = bright) |
| WOW | Knob | 0 - 100% | 0% | % | Tape flutter depth |
| FLUTTER | Knob | 0 - 100% | 0% | % | Tape speed variation depth |
| PING-PONG | Switch | Off/On | Off | - | Stereo ping-pong mode toggle |
```

### CV Modulation Matrix

[Which parameters accept CV input, and how they respond]

| Parameter | CV Input | Attenuator/Attenuverter | Range | Behavior |
|-----------|----------|------------------------|-------|----------|
| [Param] | [Yes/No] | [Type] | [Voltage to effect] | [Description] |

**Example:**
```markdown
| Parameter | CV Input | Attenuator/Attenuverter | Range | Behavior |
|-----------|----------|------------------------|-------|----------|
| TIME | Yes | None (direct sum) | ±5V = ±500ms | Direct sum with knob, clamped to 10ms-1s |
| FEEDBACK | Yes | None (direct sum) | ±5V = ±100% | Bipolar modulation, can push into self-oscillation |
| MIX | No | N/A | N/A | Manual control only |
| TONE | No | N/A | N/A | Manual control only |
| WOW | No | N/A | N/A | Manual control only |
| FLUTTER | No | N/A | N/A | Manual control only |

**Notes:**
- TIME CV uses 1V/oct tracking when feedback is maxed (pitched resonance)
- FEEDBACK CV can be polyphonic for per-channel feedback control
```

---

## Visual Indicators

### Lights/LEDs

[All visual feedback elements]

| Light Label | Color(s) | Behavior | Purpose |
|------------|---------|----------|---------|
| [Label] | [Color] | [How it changes] | [What it indicates] |

**Example:**
```markdown
| Light Label | Color(s) | Behavior | Purpose |
|------------|---------|----------|---------|
| CLIP | Red | Brightness = saturation level | Shows internal signal clipping (tape saturation) |
| PING | Green | Alternates with delay repeats | Visual feedback for ping-pong timing |

**Notes:**
- CLIP light is useful for dialing in saturation amount
- PING light alternates L/R in sync with ping-pong delays
```

---

## Inspirations

### Reference Modules

[List 3-5 existing VCV Rack or hardware Eurorack modules studied]

1. **[Module Name]** ([Manufacturer])
   - What to borrow: [Specific feature or characteristic]
   - What to improve: [Where this design differs or improves]

**Example:**
```markdown
1. **VCV Delay** (VCV)
   - What to borrow: Clean delay line implementation, CV control structure
   - What to improve: Add vintage character (saturation, filtering, wow/flutter)

2. **Chronoblob2** (Alright Devices)
   - What to borrow: External feedback input for creative patching
   - What to improve: Simpler interface, focus on tape-style delay vs multi-mode

3. **Echophon** (Synthesis Technology / VCV)
   - What to borrow: Voltage-controlled feedback, self-oscillation behavior
   - What to improve: Add vintage tape artifacts (wow/flutter/tone)

4. **RE-201 Space Echo** (Hardware Reference - Roland)
   - What to borrow: Warm tape delay character, preamp saturation
   - What to improve: Modernize with CV control, polyphony
```

### Hardware References

[If inspired by hardware gear, list here]

**Example:**
```markdown
- **Echoplex EP-3**: Vintage tape delay with characteristic high-frequency rolloff
- **Roland RE-201 Space Echo**: Tape echo with spring reverb (focus on delay only)
- **Electro-Harmonix Deluxe Memory Man**: Analog delay with chorus-style modulation
```

### Notable Characteristics

[What makes this module unique or special]

**Example:**
```markdown
- **Tape Saturation**: Soft clipping in feedback path mimics tape compression
- **Voltage-Controlled Wow/Flutter**: Unlike hardware, wow/flutter can be CV-modulated
- **Pitched Self-Oscillation**: Max feedback creates 1V/oct tracking resonance
- **External Feedback Patching**: Break feedback path for creative signal routing
- **Polyphonic Processing**: Each channel gets independent delay line (unlike most hardware)
```

---

## Technical Requirements

### DSP Requirements

[High-level DSP components needed]

**Example:**
```markdown
- Delay line with interpolation (cubic or Lagrange for smooth pitch-shifting)
- Anti-aliased saturation/clipping (oversampling or soft clipper)
- Lowpass/highpass filter in feedback path (TONE control)
- LFO for wow/flutter modulation (two independent LFOs)
- Stereo routing logic for ping-pong mode
- 1V/oct pitch tracking for self-oscillation mode
```

### Performance Targets

**CPU Budget:** [Estimated CPU usage]

**Polyphony:** [How polyphony affects performance]

**Latency:** [Acceptable processing latency]

**Example:**
```markdown
**CPU Budget:**
- Monophonic: 1-2% CPU (single delay line)
- 16-channel polyphonic: 8-12% CPU (16 independent delay lines)
- Target: <1% per active channel

**Polyphony:**
- Fully polyphonic (up to 16 channels)
- Each channel has independent delay buffer
- TIME/FEEDBACK CV can be polyphonic or monophonic (global)

**Latency:**
- Base latency = delay time (unavoidable)
- No additional processing latency (single-sample processing)
- No lookahead required
```

### Special Algorithms

[Any unique or challenging DSP requirements]

**Example:**
```markdown
- **Interpolated Delay Line**: Cubic or Lagrange3rd interpolation for smooth pitch-shifting when TIME is modulated
- **Wow/Flutter LFOs**: Slow random modulation (0.1-3 Hz) for tape speed variation
- **Anti-Aliased Saturation**: Soft clipper with oversampling (2x-4x) to prevent aliasing
- **1V/oct Tracking**: When FEEDBACK = 100%, delay time follows 1V/oct standard for pitched resonance
```

---

## Implementation Challenges

### Known Challenges

[List anticipated difficulties and considerations]

1. **[Challenge Name]**
   - Description: [What makes this difficult]
   - Approach: [How to address it]

**Example:**
```markdown
1. **Smooth Delay Time Modulation**
   - Description: Direct delay time changes cause pitch glitches and clicks
   - Approach: Use high-quality interpolation (Lagrange3rd or cubic) and smooth time changes over 10-20ms

2. **Self-Oscillation Stability**
   - Description: Feedback >100% can runaway and clip internal buffer
   - Approach: Soft limiter in feedback path, allow controlled saturation up to 120% feedback

3. **Polyphonic Memory Usage**
   - Description: 16 channels × 1s delay = 16s of audio buffering at 44.1kHz = ~700KB per module instance
   - Approach: Acceptable for modern systems, document memory usage in manual

4. **Wow/Flutter vs Pitch CV**
   - Description: Both modulate delay time, need to sum correctly without causing runaway
   - Approach: Apply wow/flutter as ±2% modulation after TIME CV, use exponential scaling for 1V/oct

5. **Stereo Ping-Pong Timing**
   - Description: Need to alternate delays between L/R outputs with correct timing
   - Approach: Use dual delay lines with feedback crossover routing
```

### Research Needed

[Open questions or areas requiring investigation]

**Example:**
```markdown
- VCV Rack best practices for large delay buffers (single vector vs circular buffer)
- Optimal interpolation method (Lagrange3rd vs Hermite vs cubic)
- How other VCV delay modules handle polyphonic memory management
- Whether to implement tape saturation with oversampling or use soft clipper
```

---

## Design Constraints

### Must Have

[Non-negotiable features]

**Example:**
```markdown
- Clean, usable delay sound without excessive coloration (user controls character)
- Voltage-controlled delay time and feedback
- Polyphonic processing (up to 16 channels)
- External feedback input for creative patching
- Self-oscillation at max feedback
```

### Should Have

[Important but negotiable features]

**Example:**
```markdown
- Ping-pong stereo mode
- Tape saturation/clipping indicator
- Wow/flutter controls
- Tone control in feedback path
```

### Could Have

[Nice-to-have features if time/complexity allows]

**Example:**
```markdown
- Tap tempo input (clock to delay time conversion)
- Multiple delay taps (early reflections)
- Ducking (auto-level reduction of delays)
- Reverse delay mode
```

### Won't Have

[Explicitly excluded features to maintain focus]

**Example:**
```markdown
- Spring reverb (focus on delay only, unlike RE-201)
- Preset storage (use VCV preset system)
- Multiple delay modes (keep focused on tape-style)
- MIDI sync (use CV clock instead)
```

---

## Patching Scenarios

### Example Patches

[Describe 3-5 complete patch examples using this module]

#### Patch 1: [Scenario Name]

**Modules:** [List modules in patch]

**Connections:**
- [Source] → [This Module Input]
- [This Module Output] → [Destination]

**Settings:**
- [Parameter] = [Value]

**Result:** [What it sounds like / what it does]

**Example:**
```markdown
#### Patch 1: Rhythmic Tape Echo

**Modules:** VCO → VCA → [TapeDelay] → Mixer → Out

**Connections:**
- VCO OUT → VCA IN
- VCA OUT → TapeDelay IN
- TapeDelay OUT L → Mixer CH1
- TapeDelay OUT R → Mixer CH2
- Clock/16 → TapeDelay TIME CV (rhythmic modulation)

**Settings:**
- TIME = 250ms (quarter note at 120 BPM)
- FEEDBACK = 60% (3-4 repeats)
- MIX = 30% (subtle echo)
- TONE = -40 (warm, dark repeats)
- WOW = 20% (subtle tape warble)

**Result:** Classic tape echo sound with rhythmic modulation. Each repeat gets darker and slightly warped. Clock modulation creates rhythmic timing shifts.
```

#### Patch 2: [Scenario Name]

[Repeat structure above]

**Example:**
```markdown
#### Patch 2: Self-Oscillating Drone

**Modules:** [TapeDelay] → VCA → Out

**Connections:**
- Nothing → TapeDelay IN (feedback only)
- TapeDelay OUT L → VCA IN
- Sequencer CV → TapeDelay TIME CV (1V/oct pitch)

**Settings:**
- TIME = 100ms (base pitch)
- FEEDBACK = 100% (infinite sustain)
- MIX = 100% (wet only)
- TONE = +20 (bright, ringing tone)

**Result:** Self-oscillation creates pitched drone that tracks 1V/oct CV input. Use as additional VCO with unique timbral characteristics. Adjusting TIME knob changes pitch, TONE knob changes harmonic content.
```

---

## Success Criteria

### Functional Requirements

[Must work correctly]

**Example:**
```markdown
- [ ] Clean delay from 10ms to 1s without artifacts
- [ ] Voltage-controlled delay time and feedback
- [ ] Polyphonic processing (1-16 channels)
- [ ] External feedback input works correctly
- [ ] Self-oscillation stable at 100% feedback
- [ ] Ping-pong mode alternates L/R correctly
- [ ] No clicks when modulating delay time
- [ ] Tape saturation/clipping indicator works
```

### Sonic Requirements

[Must sound good]

**Example:**
```markdown
- [ ] Warm, vintage character (not sterile digital delay)
- [ ] Smooth pitch-shifting when TIME is modulated
- [ ] Natural high-frequency rolloff (tape-style)
- [ ] Pleasant saturation at high feedback levels
- [ ] Wow/flutter adds organic movement (not excessive)
```

### Performance Requirements

[Must be efficient]

**Example:**
```markdown
- [ ] <1% CPU per active channel
- [ ] No audio dropouts or clicks under heavy modulation
- [ ] Polyphonic processing works up to 16 channels
- [ ] Memory usage acceptable (<1 MB per instance)
```

### Usability Requirements

[Must be intuitive]

**Example:**
```markdown
- [ ] Controls respond immediately without lag
- [ ] Parameter ranges are musical (no dead zones)
- [ ] Visual feedback (lights) aids patching
- [ ] Labels are clear and readable
- [ ] HP width allows comfortable knob spacing
```

---

## Notes

[Any additional context, design decisions, or open questions]

**Example:**
```markdown
- Considered adding spring reverb (like RE-201) but decided to focus on delay only for simpler design
- External feedback input is critical for creative patching (filters in feedback path, etc.)
- Polyphony is essential for modern VCV Rack compatibility (many users expect poly support)
- Ping-pong mode adds spatial interest without requiring additional reverb module
- Wow/flutter controls differentiate this from clean digital delays
- 1V/oct tracking in self-oscillation mode enables use as VCO (unexpected feature)
- CLIP light helps users dial in saturation without excessive clipping
```

---

## Revision History

| Date | Version | Changes | Author |
|------|---------|---------|--------|
| [YYYY-MM-DD] | 1.0 | Initial creative brief | [Author] |

**Example:**
```markdown
| Date | Version | Changes | Author |
|------|---------|---------|--------|
| 2025-11-12 | 1.0 | Initial creative brief | Claude |
| 2025-11-13 | 1.1 | Added external feedback input requirement | User |
```

---

## Contract Status

**Status:** [Draft | Approved | Immutable]

**Approval Date:** [YYYY-MM-DD or "Pending"]

**Implementation Stage:** [0 = Ideation | 1 = Planning | 2+ = Implementation locked]

**Notes:**
- **Draft**: Still iterating on concept, changes allowed
- **Approved**: Ready for planning, changes require discussion
- **Immutable**: Implementation started, changes forbidden (would break contract)

**Example:**
```markdown
**Status:** Immutable

**Approval Date:** 2025-11-12

**Implementation Stage:** 2 (Foundation stage - contract locked)

**Notes:**
Contract locked after Stage 1 planning completion. No changes allowed during Stages 2-5 implementation. Any changes must create new version and restart workflow.
```
